name: http_server
description: A simple REST API server.
version: 0.0.1
author: Philippe Assis <codephilippe@gmail.com>
repository: https://github.com/phlowdotdev/phlow
license: MIT
type: main
tags:
  - http
  - rest
  - api
  - server
  - web
  - endpoint
with:
  type: object
  required: false
  properties:
    port:
      type: number
      description: The port number to listen on.
      default: 4000
      required: false
    host:
      type: string
      description: The host to listen on.
      default: "0.0.0.0"
      required: false
    openapi_spec:
      type: object
      description: OpenAPI 3.0 specification as inline object for automatic route validation and path parameter extraction
      required: false
    validation:
      type: object
      description: Validation configuration for OpenAPI
      required: false
      properties:
        strict_mode:
          type: boolean
          description: "Enable strict validation mode (default: true)"
          default: true
          required: false
        validate_request_body:
          type: boolean
          description: "Validate request body against OpenAPI schema (default: true)"
          default: true
          required: false
        validate_response_body:
          type: boolean
          description: "Validate response body against OpenAPI schema (default: false)"
          default: false
          required: false
    cors:
      type: object
      description: CORS (Cross-Origin Resource Sharing) configuration
      required: false
      properties:
        origins:
          type: array
          description: "Allowed origins (default: ['*'])"
          default: ["*"]
          required: false
        methods:
          type: array
          description: "Allowed HTTP methods (default: ['GET', 'POST', 'PUT', 'PATCH', 'DELETE', 'OPTIONS'])"
          default: ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"]
          required: false
        headers:
          type: array
          description: "Allowed headers (default: ['Content-Type', 'Authorization', 'X-Requested-With'])"
          default: ["Content-Type", "Authorization", "X-Requested-With"]
          required: false
        credentials:
          type: boolean
          description: "Allow credentials (default: true)"
          default: true
          required: false
        max_age:
          type: number
          description: "Preflight cache duration in seconds (default: 86400)"
          default: 86400
          required: false
input:
  type: object
  required: false
  properties:
    headers:
      type: object
      description: The headers to return.
      required: false
      default: {}
    body:
      type: string
      description: The body to return.
      required: false
      default: ""
    status_code:
      type: number
      description: The status code to return.
      required: false
      default: 200
output:
  type: object
  required: true
  properties:
    method:
      type: string
      description: The HTTP method used, e.g., GET, POST, PUT, PATCH, OPTIONS, DELETE.
      required: true
    path:
      type: string
      description: The path of the request.
      required: true
    headers:
      type: object
      description: The headers of the request.
      required: true
    body:
      type: string
      description: The body of the request.
      required: true
    query_string:
      type: object
      description: The query parameters of the request.
      required: true
    query_params:
      type: object
      description: The path parameters of the request.
      required: true
    uri:
      type: string
      description: "The full URI of the request, including the query string, example: /path?query=param"
      required: true
    client_ip:
      type: string
      description: The IP address of the client making the request.
      required: true
    body_size:
      type: number
      description: The size of the body in bytes.
      required: true
    path_params:
      type: object
      description: "The path parameters extracted from the URL pattern."
      required: true

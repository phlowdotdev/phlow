name: openai
description: |
  Integração direta com a API da OpenAI (chat/completions/embeddings/áudio/imagens/responses).
  Configure via `with: { api_key: "..." }` ou variável de ambiente `OPENAI_API_KEY`.
version: 0.1.0
author: Philippe Assis <codephilippe@gmail.com>
license: MIT
type: step
tags:
  - openai
  - ai
  - nlp

with:
  type: object
  required: false
  properties:
    api_key:
      type: string
      description: API key da OpenAI (fallback para `OPENAI_API_KEY`).
      required: false
    model:
      type: string
      description: "Modelo padrão (ex: gpt-5-mini)."
      required: false
    proxy:
      type: string
      description: URL de proxy HTTP(s) para as requisições (opcional).
      required: false
    api_url:
      type: string
      description: "Base URL da API (padrão: https://api.openai.com/v1/)."
      required: false

input:
  type: object
  required: true
  additionalProperties: true
  properties:
    action:
      type: string
      description: Ação a executar. Ao usar `openai.<acao>`, isto é preenchido automaticamente.
      enum:
        - chat
        - completions
        - embeddings
        - audio_transcribe
        - audio_translate
        - images_create
        - images_edit
        - responses
      required: true
    # O payload enviado à API é TODO o input recebido, exceto o campo `action`.
    # Exemplo (chat): { action: "chat", model, messages, temperature, ... }

output:
  type: object
  required: true
  properties:
    success:
      type: boolean
      required: true
    data:
      type: any
      required: false
    error:
      type: string
      required: false

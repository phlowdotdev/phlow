"use strict";(self.webpackChunkphlow_docs=self.webpackChunkphlow_docs||[]).push([[279],{5189:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"opentelemetry","title":"OpenTelemetry","description":"Phlow provides built-in support for OpenTelemetry to enable observability and monitoring of your workflows. This includes tracing, metrics, and logging capabilities.","source":"@site/docs/opentelemetry.md","sourceDirName":".","slug":"/opentelemetry","permalink":"/docs/opentelemetry","draft":false,"unlisted":false,"editUrl":"https://github.com/phlowdotdev/phlow/tree/main/docs/docs/opentelemetry.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8,"title":"OpenTelemetry"},"sidebar":"docsSidebar","previous":{"title":"Creating Your Own Module","permalink":"/docs/packages-and-modules/create-module"},"next":{"title":"Running Remote Projects","permalink":"/docs/remote-projects"}}');var i=r(4848),s=r(8453);const l={sidebar_position:8,title:"OpenTelemetry"},o=void 0,d={},c=[{value:"OpenTelemetry Providers",id:"opentelemetry-providers",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Enabling OpenTelemetry",id:"enabling-opentelemetry",level:3},{value:"OpenTelemetry Standard Environment Variables",id:"opentelemetry-standard-environment-variables",level:3},{value:"OpenTelemetry + Jaeger (Local Dev Setup)",id:"opentelemetry--jaeger-local-dev-setup",level:2},{value:"1. Run Jaeger with OTLP support",id:"1-run-jaeger-with-otlp-support",level:3},{value:"2. Configure environment variables",id:"2-configure-environment-variables",level:3},{value:"3. Open the Jaeger UI",id:"3-open-the-jaeger-ui",level:3}];function a(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Phlow provides built-in support for ",(0,i.jsx)(n.strong,{children:"OpenTelemetry"})," to enable observability and monitoring of your workflows. This includes tracing, metrics, and logging capabilities.\nThis allows you to gain insights into the performance and behavior of your workflows, making it easier to identify bottlenecks and optimize your processes."]}),"\n",(0,i.jsx)(n.h2,{id:"opentelemetry-providers",children:"OpenTelemetry Providers"}),"\n",(0,i.jsx)(n.p,{children:"Phlow includes the following OpenTelemetry providers:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tracing"}),": Captures spans and logs for distributed tracing."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Metrics"}),": Collects and exports metrics data for performance monitoring."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Logging"}),": Integrates with the logging system to provide structured logs."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsx)(n.p,{children:"To enable OpenTelemetry in your Phlow instance, you can set the following environment variables:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default Value"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"PHLOW_OTEL"}),(0,i.jsx)(n.td,{children:"Enable OpenTelemetry"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"false"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"PHLOW_LOG"}),(0,i.jsx)(n.td,{children:"Log level"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"WARN"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"PHLOW_SPAN"}),(0,i.jsx)(n.td,{children:"Span level"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"INFO"})})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"enabling-opentelemetry",children:"Enabling OpenTelemetry"}),"\n",(0,i.jsxs)(n.p,{children:["By default, OpenTelemetry is not enabled in Phlow. To activate it, you need to set the ",(0,i.jsx)(n.code,{children:"PHLOW_OTEL"})," environment variable to ",(0,i.jsx)(n.code,{children:"true"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export PHLOW_OTEL=true\n"})}),"\n",(0,i.jsx)(n.p,{children:"This ensures that OpenTelemetry features, such as tracing, metrics, and logging, are activated for your workflows."}),"\n",(0,i.jsx)(n.h3,{id:"opentelemetry-standard-environment-variables",children:"OpenTelemetry Standard Environment Variables"}),"\n",(0,i.jsx)(n.p,{children:"You can use the standard OpenTelemetry environment variables to configure your project. Below are some commonly used variables:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Variable"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OTEL_EXPORTER_OTLP_ENDPOINT"})}),(0,i.jsxs)(n.td,{children:["The endpoint for sending OTLP data (e.g., ",(0,i.jsx)(n.code,{children:"http://localhost:4317"})," for gRPC)."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OTEL_RESOURCE_ATTRIBUTES"})}),(0,i.jsxs)(n.td,{children:["Key-value pairs to describe the resource (e.g., ",(0,i.jsx)(n.code,{children:"service.name=phlow,service.version=1.0.0"}),")."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OTEL_SERVICE_NAME"})}),(0,i.jsx)(n.td,{children:"The name of the service emitting telemetry data."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OTEL_LOG_LEVEL"})}),(0,i.jsxs)(n.td,{children:["The log level for the SDK (e.g., ",(0,i.jsx)(n.code,{children:"info"}),", ",(0,i.jsx)(n.code,{children:"debug"}),")."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OTEL_TRACES_SAMPLER"})}),(0,i.jsxs)(n.td,{children:["The sampler to use for traces (e.g., ",(0,i.jsx)(n.code,{children:"always_on"}),", ",(0,i.jsx)(n.code,{children:"always_off"}),", ",(0,i.jsx)(n.code,{children:"traceidratio"}),")."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"OTEL_TRACES_SAMPLER_ARG"})}),(0,i.jsxs)(n.td,{children:["Arguments for the sampler (e.g., ",(0,i.jsx)(n.code,{children:"0.25"})," for 25% sampling rate with ",(0,i.jsx)(n.code,{children:"traceidratio"}),")."]})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["For a complete list of environment variables, refer to the ",(0,i.jsx)(n.a,{href:"https://opentelemetry.io/docs/specs/otel/configuration/sdk-environment-variables/",children:"OpenTelemetry documentation"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"opentelemetry--jaeger-local-dev-setup",children:"OpenTelemetry + Jaeger (Local Dev Setup)"}),"\n",(0,i.jsxs)(n.p,{children:["To enable observability with ",(0,i.jsx)(n.strong,{children:"Jaeger"})," during development, you can run a full OpenTelemetry-compatible collector locally in seconds."]}),"\n",(0,i.jsx)(n.h3,{id:"1-run-jaeger-with-otlp-support",children:"1. Run Jaeger with OTLP support"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"docker run -d \\\n  -p4318:4318 \\  # OTLP HTTP\n  -p4317:4317 \\  # OTLP gRPC\n  -p16686:16686 \\  # Jaeger UI\n  jaegertracing/all-in-one:latest\n"})}),"\n",(0,i.jsx)(n.p,{children:"This container supports OTLP over HTTP and gRPC, which are both compatible with Phlow's OpenTelemetry output."}),"\n",(0,i.jsx)(n.h3,{id:"2-configure-environment-variables",children:"2. Configure environment variables"}),"\n",(0,i.jsxs)(n.p,{children:["Set the following environment variables in your shell or ",(0,i.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'export OTEL_RESOURCE_ATTRIBUTES="service.name=phlow-dev,service.version=0.1.0"\nexport OTEL_SERVICE_NAME="phlow-dev"\n'})}),"\n",(0,i.jsxs)(n.p,{children:["You can change the ",(0,i.jsx)(n.code,{children:"service.name"})," to any label that helps identify your instance in Jaeger."]}),"\n",(0,i.jsx)(n.h3,{id:"3-open-the-jaeger-ui",children:"3. Open the Jaeger UI"}),"\n",(0,i.jsx)(n.p,{children:"Once running, access the Jaeger web interface at:"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"http://localhost:16686",children:"http://localhost:16686"})}),"\n",(0,i.jsxs)(n.p,{children:["Search for your service using the name defined in ",(0,i.jsx)(n.code,{children:"OTEL_SERVICE_NAME"}),"."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var t=r(6540);const i={},s=t.createContext(i);function l(e){const n=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);